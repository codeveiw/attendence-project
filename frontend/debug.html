<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <title>ØªØ´Ø®ÙŠØµ Ø§Ù„Ù†Ø¸Ø§Ù…</title>
    <style>
        body { font-family: Arial; margin: 20px; }
        .box { border: 1px solid #ccc; padding: 10px; margin: 10px 0; border-radius: 5px; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .info { background: #d1ecf1; color: #0c5460; }
    </style>
</head>
<body>
    <h1>ğŸ”§ ØªØ´Ø®ÙŠØµ Ø§Ù„Ù†Ø¸Ø§Ù…</h1>
    
    <div id="results"></div>

    <script>
        const results = document.getElementById('results');
        
        function addResult(title, status, message) {
            const box = document.createElement('div');
            box.className = `box ${status}`;
            box.innerHTML = `<strong>${title}:</strong> ${message}`;
            results.appendChild(box);
        }

        // Ø§Ø®ØªØ¨Ø± API
        (async () => {
            // 1. Ø§Ø®ØªØ¨Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ API
            try {
                const response = await fetch('http://127.0.0.1:5000/api/health');
                if (response.ok) {
                    addResult('API Health', 'success', 'âœ… Ø§Ù„Ø®Ø§Ø¯Ù… ÙŠØ³ØªØ¬ÙŠØ¨');
                } else {
                    addResult('API Health', 'error', 'âŒ Ø§Ù„Ø®Ø§Ø¯Ù… ÙŠØ±Ø¯ Ø¨Ø­Ø§Ù„Ø© Ø®Ø·Ø£: ' + response.status);
                }
            } catch (e) {
                addResult('API Health', 'error', 'âŒ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ø®Ø§Ø¯Ù…: ' + e.message);
            }

            // 2. Ø§Ø®ØªØ¨Ø± localStorage
            try {
                localStorage.setItem('test', 'test');
                localStorage.removeItem('test');
                addResult('LocalStorage', 'success', 'âœ… localStorage ÙŠØ¹Ù…Ù„');
            } catch (e) {
                addResult('LocalStorage', 'error', 'âŒ Ø®Ø·Ø£ ÙÙŠ localStorage: ' + e.message);
            }

            // 3. Ø§Ø®ØªØ¨Ø± Axios
            try {
                if (typeof axios !== 'undefined') {
                    addResult('Axios', 'success', 'âœ… Ù…ÙƒØªØ¨Ø© Axios Ù…Ø­Ù…Ù„Ø©');
                } else {
                    addResult('Axios', 'error', 'âŒ Ù…ÙƒØªØ¨Ø© Axios ØºÙŠØ± Ù…Ø­Ù…Ù„Ø©');
                }
            } catch (e) {
                addResult('Axios', 'error', 'âŒ Ø®Ø·Ø£ ÙÙŠ Axios: ' + e.message);
            }

            // 4. Ø§Ø®ØªØ¨Ø± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
            try {
                const response = await fetch('http://127.0.0.1:5000/api/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ username: 'student1', password: '123456' })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    addResult('Login Test', 'success', 'âœ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù†Ø§Ø¬Ø­: ' + data.user.username);
                } else {
                    addResult('Login Test', 'error', 'âŒ ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„: ' + data.error);
                }
            } catch (e) {
                addResult('Login Test', 'error', 'âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„: ' + e.message);
            }

            // 5. Ø§Ø®ØªØ¨Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„ÙØ§Øª
            const files = ['./js/shared.js', './js/student.js', './js/login.js'];
            for (const file of files) {
                try {
                    const response = await fetch(file);
                    if (response.ok) {
                        addResult(`ØªØ­Ù…ÙŠÙ„ ${file}`, 'success', 'âœ… Ø§Ù„Ù…Ù„Ù Ù…Ø­Ù…Ù„');
                    } else {
                        addResult(`ØªØ­Ù…ÙŠÙ„ ${file}`, 'error', 'âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ù');
                    }
                } catch (e) {
                    addResult(`ØªØ­Ù…ÙŠÙ„ ${file}`, 'error', 'âŒ Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ù: ' + e.message);
                }
            }

            addResult('Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©', 'info', 'âœ… Ø§ÙƒØªÙ…Ù„ Ø§Ù„ØªØ´Ø®ÙŠØµ - Ù„Ø§Ø­Ø¸ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø£Ø¹Ù„Ø§Ù‡');
        })();
    </script>
</body>
</html>
